<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VideoQueen</title>
    <link rel="stylesheet" href="app.css">
    <link rel="manifest" href="pwa_manifest.json">
    <script src="app.js"></script>
  </head>
  <body>
    <div id="video-container">
      <div id="osd-container">
        <div id="osd-title"></div>
        <div id="osd-tags"></div>
        <div id="osd-fileinfo"></div>
        <div id="osd-info">
          <div id="osd-info1" class="osd-info-item"></div>
          <div id="osd-info2" class="osd-info-item"></div>
        </div>
        <div id="osd-sections"></div>
      </div>
      <video loop id="video-player" controls="controls" controlsList="nodownload" poster="assets/black.png"></video>

      <dialog id="name-scene-dialog">
        <form method="dialog" id="name-scene-form">
          <div class="save-scene-grid">
            <span>Name</span><input id="save-scene-name" class="default-edit" type="text"></input>
          </div>
          <div id="save-scene-buttons">
            <button class="dialog-button" id="save-scene-cancel" formmethod="dialog">Cancel</button>
            <button class="dialog-button" id="save-scene-confirm" value="default">Add scene</button>
          </div>
        </form>
      </dialog>
    </div>

    <div id="toast-container">
      <div id="toast" style="opacity:0">
        <span id="toast-msg"></span><button id="toast-close"></button>
      </div>
    </div>

    <div id="gallery-container">
      <div id="toolbar">
        <button id="open-folder" title="Open folder"></button>
        <input id="search-entry" type="text" spellcheck="false"></input>
        <button id="clear-search" title="Clear search"></button>
        <span id="video-count">0</span>
        <button id="loop-button" title="Toggle loop"></button>
        <div id="sort-dropdown">
          <button id="shuffle-button"></button>
          <div id="sort-dropdown-content" class="sort-dropdown-content">
            <input type="radio" id="arrange_shuffle" name="arrange-group">
            <label for="arrange_shuffle">Shuffle</label><br>
            <input type="radio" id="arrange_by_name" name="arrange-group">
            <label for="arrange_by_name">Sort by title</label><br>
            <input type="radio" id="arrange_by_file_size" name="arrange-group">
            <label for="arrange_by_file_size">Sort by file size</label><br>
            <input type="radio" id="arrange_by_duration" name="arrange-group">
            <label for="arrange_by_duration">Sort by duration</label><br>
            <input type="radio" id="arrange_by_quality" name="arrange-group">
            <label for="arrange_by_quality">Sort by quality</label><br>
          </div>
        </div>
        <button id="settings" title="Settings"></button>
      </div>
      <div id="sort-selection"></div>
      <div id="completion"></div>

      <div id="gallery-view">
        <div class="scroll-gradient" id="top-gradient-mask"></div>
        <div id="entries"></div>
        <div class="scroll-gradient" id="bottom-gradient-mask"></div>
      </div>

      <div id="initial-view">
        <button id="initial-open-folder" title="Open folder"></button>
        <div id="initial-text" style="text-align: center;">
          <h1 style="margin: 0; font-size: 24px; font-weight: 600; color: var(--text-color);">VideoQueen</h1>
          <p style="margin: 8px 0 0 0; color: var(--text-color-subtle);">Select a folder to start watching</p>
        </div>
        <div id="previous-dirs-container" style="display: none; margin-top: 24px; text-align: center;">
          <h3 style="font-size: 14px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-color-subtle); margin-bottom: 12px;">Previously opened</h3>
          <div id="previous-dirs" style="display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;"></div>
        </div>
      </div>
    </div>

    <dialog id="settings-dialog">
      <form method="dialog">
        <input type="checkbox" id="settings-hide-dupes" name="settings-hide-dupes">
        <label for="settings-hide-dupes">Hide video duplicates</label><br>

        <div id="settings-dialog-buttons">
          <button class="dialog-button" id="settings-export-tags">Export metadata</button>
          <button class="dialog-button" id="settings-import-tags">Import metadata</button>
          <button class="dialog-button" id="settings-gc-previews">Garbage collect</button>
          <div style="flex-grow: 1;"></div>
          <button class="dialog-button" id="settings-confirm" value="default">Close</button>
        </div>
      </form>
    </dialog>

    <div id="progress-container" style="opacity:0">
      <span>Generating previews</span><progress id="progress" value=0 max=1></progress>
    </div>

    <video id="generator" muted></video>
    <canvas id="canvas"></canvas>
  </body>
</html>
